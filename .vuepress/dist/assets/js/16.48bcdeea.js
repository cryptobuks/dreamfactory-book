(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{150:function(e,t,a){"use strict";a.r(t);var n=a(0),s=Object(n.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[e._m(0),e._v(" "),a("p",[e._v("While DreamFactory is already fairly fast, secure and maintenance free out of the box, there are quite a few modifications you can make to enhance your instance.  We have broken these down into several categories to make focusing on individual features easier, almost as a checklist for optimal performance and maintenance.")]),e._v(" "),e._m(1),e._v(" "),a("p",[e._v("For database-backed APIs, there is no more impactful task one could\ntake than properly indexing the database in addition to ensuring the\ndatabase server has been allocated appropriate hardware and network\nresources. Please see the below links for references to database optimization.")]),e._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/optimization.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("MySQL"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://docs.microsoft.com/en-us/sql/relational-databases/performance/performance-center-for-sql-server-database-engine-and-azure-sql-database?view=sql-server-2017",target:"_blank",rel:"noopener noreferrer"}},[e._v("SQL Server"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("Enable database API caching whenever practical at service creation\ntime, as it will undoubtedly improve performance.")]),e._v(" "),a("img",{attrs:{src:"/images/10/database_caching.png",width:"800"}}),e._v(" "),a("p",[e._v("You can achieve particularly high performance by compiling your\nDreamFactory application code using OPcache. You can learn more about\nOPcache in these links:")]),e._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"http://php.net/manual/en/book.opcache.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("Official PHP Docs"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://medium.com/appstract/make-your-laravel-app-fly-with-php-opcache-9948db2a5f93",target:"_blank",rel:"noopener noreferrer"}},[e._v("How to Make your Laravel App Fly"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("DreamFactory instances may be load balanced, and can be configured to\nshare the system database, cache details, and other information\nnecessary to operate in a distributed environment. Below are some links that may help you configure a load balancer with some of the most common cloud providers.")]),e._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://docs.aws.amazon.com/elasticloadbalancing/latest/application/application-load-balancer-getting-started.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Amazon Web Services"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://cloud.google.com/load-balancing/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Google Cloud"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/load-balancer/load-balancer-overview",target:"_blank",rel:"noopener noreferrer"}},[e._v("Microsoft Azure"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.ibm.com/cloud/load-balancer",target:"_blank",rel:"noopener noreferrer"}},[e._v("IBM Cloud"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("DreamFactory enables file-based caching by default, however you may\nopt to configure one of the other supported caching solutions, such as\nRedis. Please see these links to see connection tutorials:")]),e._v(" "),a("ol",[e._m(2),e._v(" "),a("li",[a("a",{attrs:{href:"http://blog.dreamfactory.com/new-dreamfactory-cache-service-supports-redis-memcahed-and-local-storage/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Blog - Caching"),a("OutboundLink")],1)])]),e._v(" "),e._m(3),e._v(" "),a("p",[e._v("Always make sure your "),a("code",[e._v("CORS")]),e._v(' settings are only set for the appropriate "scheme/host/port tuple" to ensure you are observing the maximum security you can by only allowing cross origin resources access when there is no other way around it.  For a great explanation of '),a("code",[e._v("CORS")]),e._v(" and how they work, please see this "),a("a",{attrs:{href:"http://performantcode.com/web/do-you-really-know-cors",target:"_blank",rel:"noopener noreferrer"}},[e._v("article"),a("OutboundLink")],1),e._v(".")]),e._v(" "),e._m(4),e._v(" "),a("img",{attrs:{src:"/images/10/cors.png",width:"800"}}),e._v(" "),e._m(5),e._v(" "),a("p",[e._v("Never use a blanket API key for your APIs! Instead, create roles which\nexpressly define the level of privileges intended to be exposed via\nthe API, and then associate the role with a new App and corresponding\nAPI Key. Don't be afraid to create multiple roles and therefore\nmultiple corresponding API keys if you'd like to limit API access in\ndifferent ways on a per-client or group basis.")]),e._v(" "),e._m(6),e._v(" "),a("img",{attrs:{src:"/images/10/api_keys.png",width:"800"}}),e._v(" "),e._m(7),e._v(" "),a("img",{attrs:{src:"/images/10/roles.png",width:"800"}}),e._v(" "),e._m(8),e._v(" "),a("img",{attrs:{src:"/images/10/role_detail.png",width:"800"}}),e._v(" "),a("p",[e._v("Configure your DreamFactory web administration console to use SSL.\nNever run your environment on port 80 as like any web application it\nraises the likelihood your administration login credentials could be\nstolen by a malicious third-party.  You should be running on port 443. One of our favorite resources to create SSL certificates is "),a("a",{attrs:{href:"https://letsencrypt.org/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Let's Encrypt"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("Below are resources on how to add an SSL cert to your web server:")]),e._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"http://nginx.org/en/docs/http/configuring_https_servers.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Nginx"),a("OutboundLink")],1),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.youtube.com/watch?v=X3Pr5VATOyA",target:"_blank",rel:"noopener noreferrer"}},[e._v("Nginx YouTube Video"),a("OutboundLink")],1)])])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://www.youtube.com/watch?v=NfUoiv4FTSs",target:"_blank",rel:"noopener noreferrer"}},[e._v("Apache YouTube Example"),a("OutboundLink")],1)])]),e._v(" "),e._m(9),e._v(" "),e._m(10),e._m(11),e._v(" "),e._m(12),e._v(" "),e._m(13),e._v(" "),e._m(14),e._v(" "),e._m(15),e._v(" "),a("p",[e._v("The app was designed to have plugable modules. Every module contains it's own routes, events, and logic so as to remove one would not stop the app from working. These modules are stored under app/admin_components. In order to faciliate speed a module was designed as a central repository for data that is used frequently in the app. Many other modules rely on this module for data to do their job but with a small bit of refactoring it can be removed to produce truly untethered modules.")]),e._v(" "),e._m(16),e._v(" "),e._m(17),e._v(" "),e._m(18),e._v(" "),e._m(19),e._v(" "),e._m(20),e._v(" "),e._m(21),e._v(" "),a("p",[e._v("The utility module provides services, factories, directives, and filters related to the operation of modules. Things like our icon service, navs, table filtering/pagination, etc are stored here. Basically, things that multiple modules may need access to and/or have no other place to go.")]),e._v(" "),e._m(22),e._v(" "),a("ul",[e._m(23),e._v(" "),a("li",[a("p",[e._v("Please monitor the "),a("a",{attrs:{href:"https://blog.dreamfactory.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("DreamFactory blog"),a("OutboundLink")],1),e._v(" and/or subscribe to the DreamFactory\nnewsletter for occasional updates regarding new platform releases. You\nare encouraged to review the release details and take steps to upgrade\nyour platform to the latest version as practical.  You can find all of the release notes compiled on the "),a("a",{attrs:{href:"http://wiki.dreamfactory.com/DreamFactory/Release_Notes",target:"_blank",rel:"noopener noreferrer"}},[e._v("DreamFactory wiki"),a("OutboundLink")],1)])])])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"chapter-10-production-best-practices"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#chapter-10-production-best-practices","aria-hidden":"true"}},[this._v("#")]),this._v(" Chapter 10. Production Best Practices")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"performance"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#performance","aria-hidden":"true"}},[this._v("#")]),this._v(" Performance")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("a",{attrs:{href:"c94200f4d0567522370908afcdafd28d"}},[this._v("YouTube - Setting up and using Redis")]),t("br")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"security"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#security","aria-hidden":"true"}},[this._v("#")]),this._v(" Security")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("You can modify your "),t("code",[this._v("CORS")]),this._v(" settings in DreamFactory under the "),t("code",[this._v("Config")]),this._v(" tab.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("For database-backed APIs, create the API using a database account\npossessing privileges closely corresponding to your API privilege\nrequirements. For instance, if the database includes a table called\n"),t("code",[this._v("employees")]),this._v(" but there is no intention for this table to be accessible\nvia the API, then configure the proxy user's privileges accordingly.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("You can see an example of the multitude of API Keys we have generated on our demo server.  Don't be shy!")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("You should always make sure you set up the roles you need.  The first shot is a picture of what the roles tab looks like.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("Should you need to make API documentation available to team members,\nuse DreamFactory's user-centric role assignment feature to make solely\nthe documentation available to the team members, rather than granting\nunnecessary administrative access.")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("When running DreamFactory in a production environment, be sure to set\nthe "),a("code",[e._v(".env")]),e._v(" file's "),a("code",[e._v("APP_ENV")]),e._v(" value to "),a("code",[e._v("production")]),e._v(" and "),a("code",[e._v("APP_DEBUG")]),e._v(" to\n"),a("code",[e._v("false")]),e._v(". Leaving it set to "),a("code",[e._v("local")]),e._v(" will result in detailed\nerror-related information being returned to the client rather than\nquietly logged to the log file.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"language-php extra-class"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{attrs:{class:"token shell-comment comment"}},[e._v("##------------------------------------------------------------------------------")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## Application Settings")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("##------------------------------------------------------------------------------")]),e._v("\n\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## Application name used in email templates and other displays")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("#APP_NAME=DreamFactory")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## Encryption cipher options are AES-128-CBC or AES-256-CBC (default)")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("#APP_CIPHER=AES-256-CBC")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## Return debugging trace in exceptions: true or false (default)")]),e._v("\n"),a("span",{attrs:{class:"token constant"}},[e._v("APP_DEBUG")]),a("span",{attrs:{class:"token operator"}},[e._v("=")]),a("span",{attrs:{class:"token boolean"}},[e._v("false")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## Environment this installation is running in: local, production (default)")]),e._v("\n"),a("span",{attrs:{class:"token constant"}},[e._v("APP_ENV")]),a("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v("production\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## Use 'php artisan key:generate' to generate a new key. Key size must be 16, 24 or 32.")]),e._v("\n"),a("span",{attrs:{class:"token constant"}},[e._v("APP_KEY")]),a("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v("base64"),a("span",{attrs:{class:"token punctuation"}},[e._v(":")]),a("span",{attrs:{class:"token constant"}},[e._v("YOUR_APP_KEY")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("#APP_LOCALE=en")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## LOG setting. Where and/or how the log file is setup. Options are single (default), daily, syslog, errorlog")]),e._v("\n"),a("span",{attrs:{class:"token constant"}},[e._v("APP_LOG")]),a("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v("daily\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## LOG Level. This is hierarchical and goes in the following order.")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## DEBUG -> INFO -> NOTICE -> WARNING -> ERROR -> CRITICAL -> ALERT -> EMERGENCY")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## If you set log level to WARNING then all WARNING, ERROR, CRITICAL, ALERT, and EMERGENCY")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## will be logged. Setting log level to DEBUG will log everything.")]),e._v("\n"),a("span",{attrs:{class:"token constant"}},[e._v("APP_LOG_LEVEL")]),a("span",{attrs:{class:"token operator"}},[e._v("=")]),a("span",{attrs:{class:"token constant"}},[e._v("ERROR")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## When APP_LOG is set to 'daily', this setting dictates how many log files to keep.")]),e._v("\n"),a("span",{attrs:{class:"token constant"}},[e._v("APP_LOG_MAX_FILES")]),a("span",{attrs:{class:"token operator"}},[e._v("=")]),a("span",{attrs:{class:"token number"}},[e._v("5")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## PHP Date and Time function timezone setting")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("#APP_TIMEZONE=UTC")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## External URL representing this install")]),e._v("\n"),a("span",{attrs:{class:"token constant"}},[e._v("APP_URL")]),a("span",{attrs:{class:"token operator"}},[e._v("=")]),e._v("https"),a("span",{attrs:{class:"token punctuation"}},[e._v(":")]),a("span",{attrs:{class:"token comment"}},[e._v("//127.0.0.1:8000")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## The starting point (page, application, etc.) when a browser points to the server root URL,")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("#DF_LANDING_PAGE=/dreamfactory/dist/index.html")]),e._v("\n"),a("span",{attrs:{class:"token constant"}},[e._v("DF_LICENSE_KEY")]),a("span",{attrs:{class:"token operator"}},[e._v("=")]),a("span",{attrs:{class:"token constant"}},[e._v("YOUR_LICENSE_KEY")]),e._v("\n\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("##------------------------------------------------------------------------------")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("## Database Settings")]),e._v("\n"),a("span",{attrs:{class:"token shell-comment comment"}},[e._v("##------------------------------------------------------------------------------")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"administer-your-dreamfactory-instance-from-anywhere"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#administer-your-dreamfactory-instance-from-anywhere","aria-hidden":"true"}},[this._v("#")]),this._v(" Administer Your DreamFactory Instance From Anywhere")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("The app can be configured to manage your DreamFactory instance from another remote server. Simply open the app.js file contained in "),t("code",[this._v("app/scripts")]),this._v(" directory and add your DreamFactory instance host name to the "),t("code",[this._v("INSTANCE_BASE_URL")]),this._v(" constant at the top. You can now optionally build the app and deploy the "),t("code",[this._v("dist")]),this._v(" directory. You must enable CORS in the DreamFactory instance you will be deploying the app to.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"theme-the-app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#theme-the-app","aria-hidden":"true"}},[this._v("#")]),this._v(" Theme the app")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("In "),a("code",[e._v("app/styles/sass/partials")]),e._v(" you can find the stylesheets for all the custom parts of the app as well as a few bootswatch templates in the "),a("code",[e._v("themes")]),e._v(" directory. All of these are added in a specific order in styles.scss. To change to a different bootswatch theme simply change all occurrences of the theme name in "),a("code",[e._v("styles.scss")]),e._v(". Dont forget to run "),a("code",[e._v("grunt build")]),e._v(" to compile the stylesheets and build the app.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"app-architecture"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#app-architecture","aria-hidden":"true"}},[this._v("#")]),this._v(" App Architecture")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"main-application"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#main-application","aria-hidden":"true"}},[this._v("#")]),this._v(" Main Application")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("The main application files are located in two directories, "),a("code",[e._v("scripts")]),e._v(" and "),a("code",[e._v("views")]),e._v(" located under the app directory. The "),a("code",[e._v("scripts")]),e._v(" directory contains your "),a("code",[e._v("app.js")]),e._v(" file and a sub directory called "),a("code",[e._v("controllers")]),e._v(" contains "),a("code",[e._v("main.js")]),e._v(". Corresponding "),a("code",[e._v("views")]),e._v(" for controllers defined in "),a("code",[e._v("main.js")]),e._v(" can be found in the aforementioned "),a("code",[e._v("views")]),e._v(" directory. The "),a("code",[e._v("app.js")]),e._v(" file contains a few constants. The ones of note are the "),a("code",[e._v("INSTANCE_BASE_URL")]),e._v(", "),a("code",[e._v("INSTANCE_API_PREFIX")]),e._v(", and "),a("code",[e._v("APP_API_KEY")]),e._v(". The "),a("code",[e._v("INSTANCE_BASE_URL")]),e._v(" allows a host to be set which the application and it's modules will refer to for api calls. "),a("code",[e._v("INSTANCE_API_PREFIX")]),e._v(" can be changed to match the server setup. "),a("code",[e._v("APP_API_KEY")]),e._v(" is used in a config option defined below the constants that sets the API key for all calls made from the app. "),a("code",[e._v("app.js")]),e._v(" also defines standard routes for login, logout, registering. These routes have corresponding controllers defined in "),a("code",[e._v("main.js")]),e._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("main.js")]),this._v(" defines app specific controllers. The MainCtrl acts as a top level scope which other modules can query for app wide data. For example, our top level navigation and component navigation links are stored here in arrays which are passed to directives that render the links and control active link highlighting. Whenever a module is added/removed it's link will need to be handled here. But you shouldn't encounter this very often (or at all).")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Authentication controllers provide attachment points for authentication/register events. They implement sparse logic in dealing with auth/register events produced by the user management module. This provides a decoupling between app specific logic for auth/register and the business logic of actually authenticating/registering a user. See "),t("code",[this._v("main.js")]),this._v(" comments for more info.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{attrs:{id:"data-repository-and-utility-modules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#data-repository-and-utility-modules","aria-hidden":"true"}},[this._v("#")]),this._v(" Data repository and Utility modules")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("A data repository module called "),t("code",[this._v("dfApplicationData")]),this._v(" facilitates the loading and management of frequently used application data. It creates an object called "),t("code",[this._v("dfApplicationObj")]),this._v(". It contains generic methods to access, modify, and delete data in the application and on the server. It also provides accessor methods to retrieve and save the actual "),t("code",[this._v("dfApplicationObj")]),this._v(". While not recommended to interact with this object directly it is sometimes a necessary evil. The module also contains init code to check whether it is necessary to build a new app object or to refresh the screen with local data as well as what apis to load.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"maintenance"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#maintenance","aria-hidden":"true"}},[this._v("#")]),this._v(" Maintenance")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("p",[this._v("Do not use Bitnami in production environments. While Bitnami\nundoubtedly offers a turnkey approach to getting started with\nDreamFactory, it is intended for use solely during the exploratory and\ndevelopment phases of your project. Certain Bitnami characteristics\nmake subsequent software upgrades difficult and therefore raise the\nlikelihood production environment upgrades will be unreasonably\ndelayed.")])])}],!1,null,null,null);s.options.__file="chapter10.md";t.default=s.exports}}]);